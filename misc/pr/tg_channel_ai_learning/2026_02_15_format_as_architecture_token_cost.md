https://soviar-systems.github.io/ai_engineering_handbook/format-as-architecture-signal-noise-in-prompt-delivery/
**–§–æ—Ä–º–∞—Ç –ø—Ä–æ–º–ø—Ç–∞ ‚Äî —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∞ –Ω–µ –≤–æ–ø—Ä–æ—Å –≤–∫—É—Å–∞**

üí° **–ü—Ä–æ–±–ª–µ–º–∞: —Ñ–æ—Ä–º–∞—Ç –Ω–µ –Ω–µ–π—Ç—Ä–∞–ª–µ–Ω**

–ö–æ–≥–¥–∞ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –≤ LLM, –º–æ–¥–µ–ª—å –≤–∏–¥–∏—Ç –Ω–µ "—Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON" –∏–ª–∏ "—Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML". –û–Ω–∞ –≤–∏–¥–∏—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–æ–≤ ‚Äî –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º attention.

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∫–∞–≤—ã—á–∫–∏ `"`, —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ `{}`, –∑–∞–ø—è—Ç—ã–µ `,` –ø–æ–ª—É—á–∞—é—Ç —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ –∂–µ "–≤–Ω–∏–º–∞–Ω–∏—è" —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞, —Å–∫–æ–ª—å–∫–æ –∏ –≤–∞—à–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –ö–∞–∂–¥—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–∏–º–≤–æ–ª ‚Äî —ç—Ç–æ —Ç–æ–∫–µ–Ω, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –º–æ–¥–µ–ª—å —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∞ –±—ã –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–∞—à–∏—Ö –∫–æ–º–∞–Ω–¥.

–í–æ–ø—Ä–æ—Å –Ω–µ "–∫–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –∫—Ä–∞—Å–∏–≤–µ–µ", –∞ **–∫–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞–∫—Å–∏–º—É–º –ø–æ–ª–µ–∑–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω**.

üß† **–¢—Ä–∏ —Ñ–æ—Ä–º–∞—Ç–∞ ‚Äî —Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö "–º–∏—Ä–∞" –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞**

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –ø—Ä–æ–º–ø—Ç–∞ –≤ —Ç—Ä—ë—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:

**JSON** ‚Äî —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö. –ö–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—ë—Ä–Ω—É—Ç–æ –≤ –∫–∞–≤—ã—á–∫–∏, –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ—á–µ–Ω —Å–∫–æ–±–∫–∞–º–∏:
```json
"patience_with_attempts": {
  "rule": "–î–∞–π —É—á–µ–Ω–∏–∫—É –¥–≤–µ –ø–æ–ø—ã—Ç–∫–∏",
  "on_first_miss": "–ü–æ–¥—Å–∫–∞–∂–∏ —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã"
}
```
–ó–¥–µ—Å—å ~22 —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Ç–æ–∫–µ–Ω–∞: 14 –∫–∞–≤—ã—á–µ–∫, 2 —Å–∫–æ–±–∫–∏, 4 –¥–≤–æ–µ—Ç–æ—á–∏—è, 2 –∑–∞–ø—è—Ç—ã–µ. –í –±–æ–ª—å—à–æ–º –ø—Ä–æ–º–ø—Ç–µ –Ω–∞ 300 —Å—Ç—Ä–æ–∫ **20-30% –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤ ‚Äî —ç—Ç–æ —à—É–º —Ñ–æ—Ä–º–∞—Ç–∞**.

**YAML** ‚Äî —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è –æ—Ç—Å—Ç—É–ø–∞–º–∏, –∞ –Ω–µ —Å–∏–º–≤–æ–ª–∞–º–∏:
```yaml
patience_with_attempts:
  rule: –î–∞–π —É—á–µ–Ω–∏–∫—É –¥–≤–µ –ø–æ–ø—ã—Ç–∫–∏
  on_first_miss: –ü–æ–¥—Å–∫–∞–∂–∏ —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
```
–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ ‚Äî –≤—Å–µ–≥–æ 4 –¥–≤–æ–µ—Ç–æ—á–∏—è. –û—Ç—Å—Ç—É–ø—ã –æ–±—Ö–æ–¥—è—Ç—Å—è –¥—ë—à–µ–≤–æ: BPE-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä —Å–∂–∏–º–∞–µ—Ç 4 –ø—Ä–æ–±–µ–ª–∞ –≤ –æ–¥–∏–Ω —Ç–æ–∫–µ–Ω.

**Minified JSON** ‚Äî —Ç–æ—Ç –∂–µ JSON, –Ω–æ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫, –≤—Å—ë –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É:
```json
{"patience_with_attempts":{"rule":"–î–∞–π —É—á–µ–Ω–∏–∫—É –¥–≤–µ –ø–æ–ø—ã—Ç–∫–∏","on_first_miss":"–ü–æ–¥—Å–∫–∞–∂–∏ —Å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã"}}
```
–°–∞–º—ã–π –¥–µ—à—ë–≤—ã–π –ø–æ —Ç–æ–∫–µ–Ω–∞–º ‚Äî –Ω–æ –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ "–æ—Ä–∏–µ–Ω—Ç–∏—Ä–∞" (–ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏, –æ—Ç—Å—Ç—É–ø–∞), –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –º–æ–≥ –±—ã —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏.

‚öôÔ∏è **–†–µ–∞–ª—å–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ: –æ–¥–∏–Ω –ø—Ä–æ–º–ø—Ç ‚Äî —á–µ—Ç—ã—Ä–µ —Ñ–æ—Ä–º–∞—Ç–∞**

–ú—ã –∏–∑–º–µ—Ä–∏–ª–∏ production-–ø—Ä–æ–º–ø—Ç (`devops_consultant.json`) —á–µ—Ä–µ–∑ BPE-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä `cl100k_base` (GPT-4):

```
Minified JSON:    2 306 —Ç–æ–∫–µ–Ω–æ–≤  ‚Äî —Å–∞–º—ã–π –¥–µ—à—ë–≤—ã–π
Standard YAML:    2 482 —Ç–æ–∫–µ–Ω–æ–≤  ‚Äî +7.6%
Pretty JSON:      2 734 —Ç–æ–∫–µ–Ω–æ–≤  ‚Äî +18.6%
YAML Literal (|): 2 798 —Ç–æ–∫–µ–Ω–æ–≤  ‚Äî +21.3%
```

–î–≤–∞ –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

‚úÖ **Standard YAML –¥–µ—à–µ–≤–ª–µ Pretty JSON –Ω–∞ 252 —Ç–æ–∫–µ–Ω–∞ (9.2%).** –û—Ç—Å—Ç—É–ø—ã –∏ –¥–≤–æ–µ—Ç–æ—á–∏—è –æ–±—Ö–æ–¥—è—Ç—Å—è –¥–µ—à–µ–≤–ª–µ, —á–µ–º –∫–∞–≤—ã—á–∫–∏ –∏ —Å–∫–æ–±–∫–∏ ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ BPE-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä—ã —É–º–µ—é—Ç —Å–∫–ª–µ–∏–≤–∞—Ç—å ` –ø—Ä–æ–±–µ–ª+—Å–ª–æ–≤–æ` –≤ –æ–¥–∏–Ω —Ç–æ–∫–µ–Ω.

‚úÖ **YAML —Å `|` (literal block) ‚Äî —Å–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π —Ñ–æ—Ä–º–∞—Ç**, –¥–∞–∂–µ –¥–æ—Ä–æ–∂–µ Pretty JSON. –°—Ç–∏–ª—å `|` –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –∏–º–µ—Ç—å –≥–ª—É–±–æ–∫–∏–π –æ—Ç—Å—Ç—É–ø, –∏ "–Ω–∞–ª–æ–≥ –Ω–∞ –ø—Ä–æ–±–µ–ª—ã" –ø–µ—Ä–µ–≤–µ—à–∏–≤–∞–µ—Ç —ç–∫–æ–Ω–æ–º–∏—é –Ω–∞ –∫–∞–≤—ã—á–∫–∞—Ö.

üîë **–ù–æ –¥–µ—à–µ–≤–∏–∑–Ω–∞ —Ç–æ–∫–µ–Ω–æ–≤ ‚â† –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π**

–≠—Ç–æ –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å–∞–π—Ç —Å—Ç–∞—Ç—å–∏. Minified JSON —ç–∫–æ–Ω–æ–º–∏—Ç 21% —Ç–æ–∫–µ–Ω–æ–≤ ‚Äî –Ω–æ —É–±–∏—Ä–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã (–ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫, –æ—Ç—Å—Ç—É–ø—ã), –ø–æ –∫–æ—Ç–æ—Ä—ã–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä –Ω–∞–≤–∏–≥–∏—Ä—É–µ—Ç –≤ –¥–ª–∏–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö.

Standard YAML —Å—Ç–æ–∏—Ç –≤—Å–µ–≥–æ –Ω–∞ 176 —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Ä–æ–∂–µ, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç **attention-—è–∫–æ—Ä—è** ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –º–æ–¥–µ–ª–∏ –Ω–µ "–ø–æ—Ç–µ—Ä—è—Ç—å—Å—è" –≤ –ø—Ä–æ–º–ø—Ç–µ –Ω–∞ 2 500 —Ç–æ–∫–µ–Ω–æ–≤. –¢–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –º–æ–¥–µ–ª–∏ –ª—É—á—à–µ —Å–ª–µ–¥—É—é—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ YAML, —á–µ–º –≤ "—Å—Ç–µ–Ω–µ —Ç–µ–∫—Å—Ç–∞" minified JSON.

–ï—Å—Ç—å –∏ –≤—Ç–æ—Ä–æ–π —Ñ–∞–∫—Ç–æ—Ä: **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö**. JSON –≤ –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–µ ‚Äî —ç—Ç–æ API-–æ—Ç–≤–µ—Ç—ã, –¥–∞–º–ø—ã –±–∞–∑, –∫–æ–Ω—Ñ–∏–≥–∏ –ø–∞–∫–µ—Ç–æ–≤. –ú–æ–¥–µ–ª—å –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç JSON —Å "–¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞". YAML ‚Äî —ç—Ç–æ Kubernetes-–º–∞–Ω–∏—Ñ–µ—Å—Ç—ã, Ansible-–ø–ª–µ–π–±—É–∫–∏, CI/CD-–ø–∞–π–ø–ª–∞–π–Ω—ã. –ú–æ–¥–µ–ª—å –∞—Å—Å–æ—Ü–∏–∏—Ä—É–µ—Ç YAML —Å "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è".

üìê **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**

| –ó–∞–¥–∞—á–∞ | –§–æ—Ä–º–∞—Ç | –ü–æ—á–µ–º—É |
|--------|--------|--------|
| –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ | JSON | –°—Ç—Ä–æ–≥–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –≤–∞–ª–∏–¥–∞—Ü–∏—è, `jq` |
| –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–º–ø—Ç–∞ –≤ LLM | Standard YAML | –ú–∏–Ω–∏–º—É–º —à—É–º–∞ + attention-—è–∫–æ—Ä—è |
| –ñ—ë—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –æ–∫–Ω–∞ | Minified JSON | –°–∞–º–∞—è –Ω–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ —Ç–æ–∫–µ–Ω–∞—Ö |
| –ö–æ–¥/—Å–∫—Ä–∏–ø—Ç—ã –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–º–ø—Ç–∞ | YAML Literal (`\|`) | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ |

üìù **–ò–∑–º–µ—Ä—å—Ç–µ —Å–∞–º–∏**

```bash
pip install tiktoken

# –°—Ç–æ–∏–º–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –≤ —Ç–æ–∫–µ–Ω–∞—Ö
cat your_prompt.json | python3 -c "
import sys, tiktoken
enc = tiktoken.get_encoding('cl100k_base')
print(len(enc.encode(sys.stdin.read())))
"
```

–í –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç—å–µ ‚Äî runnable Jupyter-—è—á–µ–π–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —á–µ—Ç—ã—Ä—ë—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤, –∞–Ω–∞–ª–∏–∑ –º–µ—Ö–∞–Ω–∏–∫–∏ BPE-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä–∞, –∏ —Ä–∞–∑–¥–µ–ª –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∞—Ç–∞–∫–∞ "–≤—ã—Ö–æ–¥–æ–º –∏–∑ –æ—Ç—Å—Ç—É–ø–∞" –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ YAML-–ø—Ä–æ–º–ø—Ç—ã).

#LLM #Prompts #YAML #JSON #Tokenization #ai_engineering_handbook
